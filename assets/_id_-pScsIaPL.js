import{_ as w,a5 as k,u as q,E as F,a as I,av as i,b as e,w as s,b0 as B,F as C,ax as N,o as P,V as R,ad as d,d as l,aJ as $,aH as A,R as v,a8 as g,aA as E,b1 as M,ay as T,az as U}from"./index-DAjhxkpu.js";import{c as j,b as z,u as D,e as H}from"./vee-validate.esm-DHpjM5UJ.js";import J from"./footer-TEFfYrRW.js";import{V as L}from"./VContainer-CSb9r1Q3.js";import{V as m,a as u}from"./VRow-D_RdKOeF.js";import{V as O}from"./VForm-CYAZqKOl.js";import"./VDivider-BRRe0oW-.js";const G=c=>(T("data-v-0de31052"),c=c(),U(),c),K={class:"background"},Q={class:"productPrice"},W={class:"py-5"},X=G(()=>i("h1",{class:"text-center text-red"},"已下架",-1)),Y={__name:"[id]",setup(c){const{api:y}=E(),V=M(),b=N(),p=k(),_=q(),a=F({_id:"",name:"",price:0,description:"",image:"",sell:!0,category:""});(async()=>{var r,o;try{const{data:t}=await y.get("/product/"+V.params.id);a.value._id=t.result._id,a.value.name=t.result.name,a.value.price=t.result.price,a.value.description=t.result.description,a.value.image=t.result.image,a.value.sell=t.result.sell,a.value.category=t.result.category,document.title="梅室 | "+a.value.name}catch(t){console.log(t),p({text:((o=(r=t==null?void 0:t.response)==null?void 0:r.data)==null?void 0:o.message)||"發生錯誤",snackbarProps:{color:"red"}})}})();const h=j({quantity:z().typeError("數量必填").required("數量必填").min(1,"最少為 1")}),{isSubmitting:f,handleSubmit:x}=D({validationSchema:h,initialValues:{quantity:1}}),n=H("quantity"),S=x(async r=>{if(!_.isLogin){b.push("/login");return}const o=await _.addCart(a.value._id,r.quantity);p({text:o.text,snackbarProps:{color:o.color}})});return(r,o)=>(P(),I(C,null,[i("div",K,[e(L,{class:"pt-10"},{default:s(()=>[e(m,{class:"pa-15 mainPicture"},{default:s(()=>[e(u,{cols:"6"},{default:s(()=>[e(R,{src:a.value.image,height:"500"},null,8,["src"])]),_:1}),e(u,{class:"productName",cols:"6"},{default:s(()=>[e(m,null,{default:s(()=>[e(u,{cols:"6"},{default:s(()=>[i("h1",null,d(a.value.name),1)]),_:1}),e(u,{cols:"6"},{default:s(()=>[i("p",Q,"$"+d(a.value.price),1)]),_:1})]),_:1}),i("p",W,d(a.value.description),1),e(m,null,{default:s(()=>[e(u,null,{default:s(()=>[e(O,{disabled:l(f),onSubmit:$(l(S),["prevent"])},{default:s(()=>[e(A,{type:"number",modelValue:l(n).value.value,"onUpdate:modelValue":o[0]||(o[0]=t=>l(n).value.value=t),modelModifiers:{number:!0},"error-messages":l(n).errorMessage.value},null,8,["modelValue","error-messages"]),e(v,{color:"#971A07",type:"submit","prepend-icon":"mdi-cart",loading:l(f)},{default:s(()=>[g("加入購物車")]),_:1},8,["loading"])]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),e(B,{class:"align-center justify-center text-center","model-value":!a.value.sell,persistent:""},{default:s(()=>[X,e(v,{to:"/"},{default:s(()=>[g("回首頁")]),_:1})]),_:1},8,["model-value"]),e(J)],64))}},ue=w(Y,[["__scopeId","data-v-0de31052"]]);export{ue as default};
