import{_ as U,u as h,a5 as B,E as g,o as V,a6 as b,w as o,aw as F,b as a,d as t,aI as N,aG as x,R as u,a8 as m,ac as R,aU as A,ab as D,a9 as M,aa as q,a7 as P,ax as E,ay as G,av as L}from"./index--XPUSPIb.js";import{c as j,a as _,u as z,e as w}from"./vee-validate.esm-QLslr8Pr.js";import{v as H,_ as J}from"./register-mYDIDElZ.js";import{V as K}from"./VContainer-CdHJ3EUV.js";import{a as c,V as C}from"./VRow-Ce4UQWLF.js";import{V as O}from"./VForm-BnMqxBIp.js";import"./_commonjsHelpers-Cpj98o6Y.js";const Q=n=>(E("data-v-86e82d42"),n=n(),G(),n),W=Q(()=>L("h1",{class:"text-center"},"登入",-1)),X={__name:"login",setup(n){const k=F(),y=h(),p=B(),r=g(!1),f=g("register"),S=j({account:_().required("使用者帳號必填").min(4,"使用者帳號長度不符").max(20,"使用者帳號長度不符").test("isAlphanumeric","使用者帳號格式錯誤",l=>H.isAlphanumeric(l)),password:_().required("使用者密碼必填").min(4,"使用者密碼長度不符").max(20,"使用者密碼長度不符")}),{handleSubmit:$,isSubmitting:v}=z({validationSchema:S}),i=w("account"),d=w("password"),I=$(async(l,{emit:e})=>{const s=await y.login(l);s==="登入成功"?(p({text:s,snackbarProps:{color:"green"}}),k.push("/"),e("close-dialog")):p({text:s,snackbarProps:{color:"red"}})}),T=l=>{f.value=l,r.value=!0};return(l,e)=>(V(),b(K,null,{default:o(()=>[a(C,null,{default:o(()=>[a(c,{cols:"12"},{default:o(()=>[W]),_:1}),a(c,{cols:"12"},{default:o(()=>[a(O,{disabled:t(v),onSubmit:N(t(I),["prevent"])},{default:o(()=>[a(x,{label:"帳號",minlength:"4",maxlength:"20",counter:"",modelValue:t(i).value.value,"onUpdate:modelValue":e[0]||(e[0]=s=>t(i).value.value=s),"error-messages":t(i).errorMessage.value},null,8,["modelValue","error-messages"]),a(x,{label:"密碼",minlength:"4",maxlength:"20",counter:"",type:"password",modelValue:t(d).value.value,"onUpdate:modelValue":e[1]||(e[1]=s=>t(d).value.value=s),"error-messages":t(d).errorMessage.value},null,8,["modelValue","error-messages"]),a(C,null,{default:o(()=>[a(c,{class:"py-8"},{default:o(()=>[a(u,{type:"submit",color:"#971A07",loading:t(v),elevation:"0",onClick:e[2]||(e[2]=s=>l.$emit("close-dialog"))},{default:o(()=>[m("登入")]),_:1},8,["loading"]),a(u,{type:"button",color:"gray",class:"ms-5",onClick:e[3]||(e[3]=s=>l.$emit("close-dialog"))},{default:o(()=>[m("取消")]),_:1}),a(u,{type:"button",class:"novip",onClick:e[4]||(e[4]=s=>T("register")),elevation:"0"},{default:o(()=>[m(" 還不是梅室會員 ")]),_:1})]),_:1})]),_:1}),a(R,{modelValue:t(r),"onUpdate:modelValue":e[7]||(e[7]=s=>A(r)?r.value=s:null),"max-width":"400px"},{default:o(()=>[t(f)==="register"?(V(),b(D,{key:0},{default:o(()=>[a(M,{class:"headline"}),a(u,{class:"text-right ml-3",icon:"mdi-close",variant:"text",onClick:e[5]||(e[5]=s=>r.value=!1)}),a(q,null,{default:o(()=>[a(J,{onCloseDialog:e[6]||(e[6]=s=>r.value=!1)})]),_:1})]),_:1})):P("",!0)]),_:1},8,["modelValue"])]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1}))}},le=U(X,[["__scopeId","data-v-86e82d42"]]);export{le as default};
