import{aJ as h,u as k,a5 as S,a6 as $,w as t,o as y,b as o,d as s,aI as C,aG as m,av as v,R as d,a8 as c}from"./index-B6C-OAFi.js";import{c as B,a as p,u as F,e as g}from"./vee-validate.esm-BTG1ocXg.js";import{v as A}from"./index-BhZWKZOw.js";import{V as M,a as f}from"./VCol-BUbm-Whd.js";import{V as N}from"./VForm-Q1p4M4qT.js";import{V as R}from"./VRow--ZGpWkJM.js";const U=v("h1",{class:"text-center"},"登入",-1),q={class:"text-center"},D={__name:"login",setup(P){const V=h(),b=k(),u=S(),x=B({account:p().required("使用者帳號必填").min(4,"使用者帳號長度不符").max(20,"使用者帳號長度不符").test("isAlphanumeric","使用者帳號格式錯誤",r=>A.isAlphanumeric(r)),password:p().required("使用者密碼必填").min(4,"使用者密碼長度不符").max(20,"使用者密碼長度不符")}),{handleSubmit:w,isSubmitting:i}=F({validationSchema:x}),l=g("account"),n=g("password"),_=w(async(r,{emit:e})=>{const a=await b.login(r);a==="登入成功"?(u({text:a,snackbarProps:{color:"green"}}),V.push("/"),e("close-dialog")):u({text:a,snackbarProps:{color:"red"}})});return(r,e)=>(y(),$(M,null,{default:t(()=>[o(R,null,{default:t(()=>[o(f,{cols:"12"},{default:t(()=>[U]),_:1}),o(f,{cols:"12"},{default:t(()=>[o(N,{disabled:s(i),onSubmit:C(s(_),["prevent"])},{default:t(()=>[o(m,{label:"帳號",minlength:"4",maxlength:"20",counter:"",modelValue:s(l).value.value,"onUpdate:modelValue":e[0]||(e[0]=a=>s(l).value.value=a),"error-messages":s(l).errorMessage.value},null,8,["modelValue","error-messages"]),o(m,{label:"密碼",minlength:"4",maxlength:"20",counter:"",type:"password",modelValue:s(n).value.value,"onUpdate:modelValue":e[1]||(e[1]=a=>s(n).value.value=a),"error-messages":s(n).errorMessage.value},null,8,["modelValue","error-messages"]),v("div",q,[o(d,{type:"submit",color:"#971A07",loading:s(i),onClick:e[2]||(e[2]=a=>r.$emit("close-dialog"))},{default:t(()=>[c("登入")]),_:1},8,["loading"]),o(d,{type:"button",color:"gray",class:"ms-5",onClick:e[3]||(e[3]=a=>r.$emit("close-dialog"))},{default:t(()=>[c("取消")]),_:1})])]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1}))}};export{D as default};
