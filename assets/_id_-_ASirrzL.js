import{_ as w,a5 as F,u as k,E as q,o as I,a as B,av as i,b as e,w as s,aK as C,F as N,aw as P,V as R,ad as d,d as r,aI as E,aG as M,R as v,a8 as g,az as $,aL as A,ax as L,ay as T}from"./index--XPUSPIb.js";import{c as U,b as j,u as z,e as D}from"./vee-validate.esm-QLslr8Pr.js";import G from"./footer-DlX6cEG5.js";import{V as K}from"./VContainer-CdHJ3EUV.js";import{V as m,a as u}from"./VRow-Ce4UQWLF.js";import{V as O}from"./VForm-BnMqxBIp.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./VDivider-B45mVl06.js";const H=c=>(L("data-v-0de31052"),c=c(),T(),c),J={class:"background"},Q={class:"productPrice"},W={class:"py-5"},X=H(()=>i("h1",{class:"text-center text-red"},"已下架",-1)),Y={__name:"[id]",setup(c){const{api:y}=$(),V=A(),b=P(),p=F(),_=k(),a=q({_id:"",name:"",price:0,description:"",image:"",sell:!0,category:""});(async()=>{var l,o;try{const{data:t}=await y.get("/product/"+V.params.id);a.value._id=t.result._id,a.value.name=t.result.name,a.value.price=t.result.price,a.value.description=t.result.description,a.value.image=t.result.image,a.value.sell=t.result.sell,a.value.category=t.result.category,document.title="梅室 | "+a.value.name}catch(t){console.log(t),p({text:((o=(l=t==null?void 0:t.response)==null?void 0:l.data)==null?void 0:o.message)||"發生錯誤",snackbarProps:{color:"red"}})}})();const h=U({quantity:j().typeError("數量必填").required("數量必填").min(1,"最少為 1")}),{isSubmitting:f,handleSubmit:x}=z({validationSchema:h,initialValues:{quantity:1}}),n=D("quantity"),S=x(async l=>{if(!_.isLogin){b.push("/login");return}const o=await _.addCart(a.value._id,l.quantity);p({text:o.text,snackbarProps:{color:o.color}})});return(l,o)=>(I(),B(N,null,[i("div",J,[e(K,{class:"pt-10"},{default:s(()=>[e(m,{class:"pa-15 mainPicture"},{default:s(()=>[e(u,{cols:"6"},{default:s(()=>[e(R,{src:a.value.image,height:"500"},null,8,["src"])]),_:1}),e(u,{class:"productName",cols:"6"},{default:s(()=>[e(m,null,{default:s(()=>[e(u,{cols:"6"},{default:s(()=>[i("h1",null,d(a.value.name),1)]),_:1}),e(u,{cols:"6"},{default:s(()=>[i("p",Q,"$"+d(a.value.price),1)]),_:1})]),_:1}),i("p",W,d(a.value.description),1),e(m,null,{default:s(()=>[e(u,null,{default:s(()=>[e(O,{disabled:r(f),onSubmit:E(r(S),["prevent"])},{default:s(()=>[e(M,{type:"number",modelValue:r(n).value.value,"onUpdate:modelValue":o[0]||(o[0]=t=>r(n).value.value=t),modelModifiers:{number:!0},"error-messages":r(n).errorMessage.value},null,8,["modelValue","error-messages"]),e(v,{color:"#971A07",type:"submit","prepend-icon":"mdi-cart",loading:r(f)},{default:s(()=>[g("加入購物車")]),_:1},8,["loading"])]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),e(C,{class:"align-center justify-center text-center","model-value":!a.value.sell,persistent:""},{default:s(()=>[X,e(v,{to:"/"},{default:s(()=>[g("回首頁")]),_:1})]),_:1},8,["model-value"]),e(G)],64))}},ie=w(Y,[["__scopeId","data-v-0de31052"]]);export{ie as default};
