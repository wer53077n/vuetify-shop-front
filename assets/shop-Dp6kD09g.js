import{_ as S,u as R,aw as A,a5 as E,E as i,r as I,o as c,a6 as _,w as a,b as e,ab as C,V as N,D as L,a as w,a7 as x,a9 as k,a8 as g,ad as y,c1 as M,aa as P,aJ as U,c2 as F,R as b,ac as j,av as z,F as B,e as G,az as H,O as J}from"./index--XPUSPIb.js";import K from"./login-CPymM6ZE.js";import{_ as O}from"./register-mYDIDElZ.js";import{V as $,a as p}from"./VRow-Ce4UQWLF.js";import{V as T}from"./VContainer-CdHJ3EUV.js";import q from"./footer-DlX6cEG5.js";import{V as Q}from"./VPagination-CVESvkfM.js";import"./vee-validate.esm-QLslr8Pr.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./VForm-BnMqxBIp.js";import"./VDivider-B45mVl06.js";const W=""+new URL("週邊BN-CcK-72ro.jpg",import.meta.url).href,X={key:0,class:"d-flex transition-fast-in-fast-out v-card--reveal",style:{height:"100%","background-color":"#971a07"}},Y={__name:"ProductCard",props:["_id","category","description","image","name","price","sell"],setup(s){const v=R();A();const V=E(),m=s,f=i(!1),r=i(!1),o=i(!1),n=i("login"),u=async()=>{if(!v.isLogin){n.value="login",o.value=!0;return}f.value=!0;const t=await v.addCart(m._id,1);V({text:t.text,snackbarProps:{color:t.color}}),f.value=!1};return(t,l)=>{const D=I("router-link");return c(),_(T,null,{default:a(()=>[e(C,{class:"pa-3"},{default:a(()=>[e(N,{src:s.image,center:"",width:"350",onMouseenter:l[0]||(l[0]=d=>r.value=!0),onMouseleave:l[1]||(l[1]=d=>r.value=!1)},{default:a(()=>[e(L,null,{default:a(()=>[r.value?(c(),w("div",X)):x("",!0)]),_:1})]),_:1},8,["src"]),e($,null,{default:a(()=>[e(p,null,{default:a(()=>[e(k,null,{default:a(()=>[e(D,{to:"/products/"+s._id},{default:a(()=>[g(y(s.name),1)]),_:1},8,["to"])]),_:1})]),_:1}),e(p,null,{default:a(()=>[e(M,null,{default:a(()=>[g("$"+y(s.price),1)]),_:1})]),_:1})]),_:1}),e(P,null,{default:a(()=>[g(y(s.description),1)]),_:1}),e(U,null,{default:a(()=>[e(F),e(b,{color:"#971A07","prepend-icon":"mdi-cart",onClick:u,loading:f.value},{default:a(()=>[g("加入購物車")]),_:1},8,["loading"])]),_:1})]),_:1}),e(j,{modelValue:o.value,"onUpdate:modelValue":l[6]||(l[6]=d=>o.value=d),"max-width":"400px"},{default:a(()=>[n.value==="register"?(c(),_(C,{key:0},{default:a(()=>[e(k,{class:"headline"}),e(b,{class:"text-right ml-3",icon:"mdi-close",variant:"text",onClick:l[2]||(l[2]=d=>o.value=!1)}),e(P,null,{default:a(()=>[e(O,{onCloseDialog:l[3]||(l[3]=d=>o.value=!1)})]),_:1})]),_:1})):x("",!0),n.value==="login"?(c(),_(C,{key:1},{default:a(()=>[e(k,{class:"headline"}),e(b,{class:"text-right ml-3",icon:"mdi-close",variant:"text",onClick:l[4]||(l[4]=d=>o.value=!1)}),e(P,null,{default:a(()=>[e(K,{onCloseDialog:l[5]||(l[5]=d=>o.value=!1)})]),_:1})]),_:1})):x("",!0)]),_:1},8,["modelValue"])]),_:1})}}},Z=S(Y,[["__scopeId","data-v-c4095fbf"]]),ee={class:"background"},h=20,ae={__name:"shop",setup(s){const{api:v}=H(),V=E(),m=i(1),f=i(1),r=i([]),o=async()=>{var n,u;try{const{data:t}=await v.get("/product",{params:{itemsPerPage:h,page:m.value}});f.value=Math.ceil(t.result.total/h),r.value.splice(0,r.value.length,...t.result.data)}catch(t){console.log(t),V({text:((u=(n=t==null?void 0:t.response)==null?void 0:n.data)==null?void 0:u.message)||"發生錯誤",snackbarProps:{color:"red"}})}};return o(),(n,u)=>(c(),w(B,null,[z("div",ee,[e(T,null,{default:a(()=>[e($,null,{default:a(()=>[e(p,{cols:"12"},{default:a(()=>[e(N,{class:"shopBN",src:W})]),_:1})]),_:1}),e($,{class:"row"},{default:a(()=>[(c(!0),w(B,null,G(r.value,t=>(c(),_(p,{cols:"3",key:t._id},{default:a(()=>[e(Z,J({ref_for:!0},t),null,16)]),_:2},1024))),128)),e(p,{class:"shopBox",cols:"10"},{default:a(()=>[e(Q,{modelValue:m.value,"onUpdate:modelValue":[u[0]||(u[0]=t=>m.value=t),o],length:f.value,rounded:"circle"},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1})]),e(q)],64))}},me=S(ae,[["__scopeId","data-v-6c9dddc8"]]);export{me as default};
