import{_ as k,u as B,ax as S,a5 as x,E as _,r as y,o as m,a6 as P,w as e,b as a,ab as A,V as b,a9 as E,a8 as p,ad as g,bZ as N,aa as R,aw as I,b6 as T,R as F,a as v,av as L,F as C,e as U,aA as M,O as $}from"./index-CMThWAey.js";import{V,a as c}from"./VRow-BbOHvp1r.js";import{V as w}from"./VContainer-DkrkuJpx.js";import j from"./footer-6PCkKIWa.js";import{V as D}from"./VPagination-CwcVEbZ-.js";import"./VDivider-v-MMDXrU.js";const G=""+new URL("週邊BN-CcK-72ro.jpg",import.meta.url).href,K={__name:"ProductCard",props:["_id","category","description","image","name","price","sell"],setup(s){const u=B(),f=S(),n=x(),d=s,o=_(!1),i=async()=>{if(!u.isLogin){f.push("/login");return}o.value=!0;const l=await u.addCart(d._id,1);n({text:l.text,snackbarProps:{color:l.color}}),o.value=!1};return(l,r)=>{const t=y("router-link");return m(),P(w,null,{default:e(()=>[a(A,{class:"pa-3"},{default:e(()=>[a(b,{src:s.image,center:"",width:"350"},null,8,["src"]),a(V,null,{default:e(()=>[a(c,null,{default:e(()=>[a(E,null,{default:e(()=>[a(t,{to:"/products/"+s._id},{default:e(()=>[p(g(s.name),1)]),_:1},8,["to"])]),_:1})]),_:1}),a(c,null,{default:e(()=>[a(N,null,{default:e(()=>[p("$"+g(s.price),1)]),_:1})]),_:1})]),_:1}),a(R,null,{default:e(()=>[p(g(s.description),1)]),_:1}),a(I,null,{default:e(()=>[a(T),a(F,{color:"#971A07","prepend-icon":"mdi-cart",onClick:i,loading:o.value},{default:e(()=>[p("加入購物車")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})}}},O=k(K,[["__scopeId","data-v-91d2f6a3"]]),Z={class:"background"},h=20,q={__name:"shop",setup(s){const{api:u}=M(),f=x(),n=_(1),d=_(1),o=_([]),i=async()=>{var l,r;try{const{data:t}=await u.get("/product",{params:{itemsPerPage:h,page:n.value}});d.value=Math.ceil(t.result.total/h),o.value.splice(0,o.value.length,...t.result.data)}catch(t){console.log(t),f({text:((r=(l=t==null?void 0:t.response)==null?void 0:l.data)==null?void 0:r.message)||"發生錯誤",snackbarProps:{color:"red"}})}};return i(),(l,r)=>(m(),v(C,null,[L("div",Z,[a(w,null,{default:e(()=>[a(V,null,{default:e(()=>[a(c,{cols:"12"},{default:e(()=>[a(b,{class:"shopBN",src:G})]),_:1})]),_:1}),a(V,{class:"row"},{default:e(()=>[(m(!0),v(C,null,U(o.value,t=>(m(),P(c,{cols:"3",key:t._id},{default:e(()=>[a(O,$({ref_for:!0},t),null,16)]),_:2},1024))),128)),a(c,{class:"shopBox",cols:"10"},{default:e(()=>[a(D,{modelValue:n.value,"onUpdate:modelValue":[r[0]||(r[0]=t=>n.value=t),i],length:d.value,rounded:"circle"},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1})]),a(j)],64))}},Y=k(q,[["__scopeId","data-v-6c9dddc8"]]);export{Y as default};
