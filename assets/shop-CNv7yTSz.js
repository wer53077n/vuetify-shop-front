import{a3 as C,u as S,aJ as w,a5 as k,E as p,r as y,o as _,a6 as x,w as t,b as a,ab as I,V as B,a9 as E,a8 as i,ad as f,bZ as A,aa as R,aw as T,b6 as N,R as $,a as V,av as b,F as h,e as F,az as L,O as M,ax as U,ay as z}from"./index-B6C-OAFi.js";import{V as P,a as g}from"./VCol-BUbm-Whd.js";import D from"./footer-4gjDfqYs.js";import{V as G}from"./VRow--ZGpWkJM.js";import{V as J}from"./VPagination-CQEdmQZg.js";import"./VDivider-DT69kc00.js";const O={__name:"ProductCard",props:["_id","category","description","image","name","price","sell"],setup(s){const c=S(),m=w(),n=k(),u=s,o=p(!1),d=async()=>{if(!c.isLogin){m.push("/login");return}o.value=!0;const l=await c.addCart(u._id,1);n({text:l.text,snackbarProps:{color:l.color}}),o.value=!1};return(l,r)=>{const e=y("router-link");return _(),x(P,null,{default:t(()=>[a(I,null,{default:t(()=>[a(B,{src:s.image,center:"",height:"200"},null,8,["src"]),a(E,null,{default:t(()=>[a(e,{to:"/products/"+s._id},{default:t(()=>[i(f(s.name),1)]),_:1},8,["to"])]),_:1}),a(A,null,{default:t(()=>[i("$"+f(s.price),1)]),_:1}),a(R,null,{default:t(()=>[i(f(s.description),1)]),_:1}),a(T,null,{default:t(()=>[a(N),a($,{color:"#971A07","prepend-icon":"mdi-cart",onClick:d,loading:o.value},{default:t(()=>[i("加入購物車")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})}}},Z=C(O,[["__scopeId","data-v-6b8caaa8"]]),j=s=>(U("data-v-6d3f41f6"),s=s(),z(),s),q={class:"background"},H=j(()=>b("h1",{class:"text-center"},"shop",-1)),v=20,K={__name:"shop",setup(s){const{api:c}=L(),m=k(),n=p(1),u=p(1),o=p([]),d=async()=>{var l,r;try{const{data:e}=await c.get("/product",{params:{itemsPerPage:v,page:n.value}});u.value=Math.ceil(e.result.total/v),o.value.splice(0,o.value.length,...e.result.data)}catch(e){console.log(e),m({text:((r=(l=e==null?void 0:e.response)==null?void 0:l.data)==null?void 0:r.message)||"發生錯誤",snackbarProps:{color:"red"}})}};return d(),(l,r)=>(_(),V(h,null,[b("div",q,[a(P,null,{default:t(()=>[a(G,null,{default:t(()=>[a(g,{cols:"12"},{default:t(()=>[H]),_:1}),(_(!0),V(h,null,F(o.value,e=>(_(),x(g,{cols:"12",md:"6",lg:"3",key:e._id},{default:t(()=>[a(Z,M({ref_for:!0},e),null,16)]),_:2},1024))),128)),a(g,{cols:"12"},{default:t(()=>[a(J,{modelValue:n.value,"onUpdate:modelValue":[r[0]||(r[0]=e=>n.value=e),d],length:u.value,rounded:"circle"},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1})]),a(D)],64))}},ta=C(K,[["__scopeId","data-v-6d3f41f6"]]);export{ta as default};
